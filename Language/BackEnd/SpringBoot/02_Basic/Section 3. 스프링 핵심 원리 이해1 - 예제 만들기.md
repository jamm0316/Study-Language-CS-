[<back](https://www.notion.so/Spring-basic-41cfc2c136874d9896aa115923bd4109?pvs=21)

---

<aside>
ğŸ“ƒ

ëª©ì°¨

</aside>

## ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

- **íšŒì›**
    - íšŒì› **ê°€ì…í•˜ê³  ì¡°íšŒ** ê°€ëŠ¥
    - íšŒì›ì€ **ì¼ë°˜ê³¼ VIP ë‘ê°€ì§€ ë“±ê¸‰**
    - íšŒì› **ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™ ê°€ëŠ¥(ë¯¸í™•ì •)**
- **ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…**
    - íšŒì› **ìƒí’ˆ ì£¼ë¬¸ ê°€ëŠ¥.**
    - íšŒì› **ë“±ê¸‰**ì— ë”°ë¼ **í• ì¸ ì •ì±… ì ìš©ê°€ëŠ¥.**
    - í• ì¸ ì •ì±…ì€ ëª¨ë“  **VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼(ë‚˜ì¤‘ì— ë³€ê²½ê°€ëŠ¥)**
    - í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.**(ë¯¸í™•ì •)**

ìš”êµ¬ì‚¬í•­ì„ ë³´ë©´ íšŒì› ë°ì´í„°, í• ì¸ ì •ì±… ê°™ì€ ë¶€ë¶„ì€ ì§€ê¸ˆ ê²°ì •í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„. ê·¸ë ‡ë‹¤ê³  ì´ëŸ° ì •ì±…ì´ ê²°ì •ë  ë•Œ ê¹Œì§€ ê°œë°œì„ ë¬´ê¸°í•œ ê¸°ë‹¤ë¦´ ìˆ˜ ì—†ìŒ. ê°ì²´ ì§€í–¥ ì„¤ê³„ë¡œ ì„¤ê³„í•˜ì.

ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ë©´ ë¨.

> **ì°¸ê³ **: í”„ë¡œì íŠ¸ í™˜ê²½ì„¤ì •ì„ í¸ë¦¬í•˜ê²Œ í•˜ë ¤ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ ì‚¬ìš©. ì§€ê¸ˆì€ ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ ìë°”ë¡œë§Œ ê°œë°œì„ ì§„í–‰í•œë‹¤.
> 

## íšŒì› ë„ë©”ì¸ ì„¤ê³„

- íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­
    - íšŒì› ê°€ì…, ì¡°íšŒ
    - íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ê°€ì§€ ë“±ê¸‰
    - íšŒì› ë°ì´í„°ëŠ” ë¯¸í™•ì •(ìì²´ DB, ì™¸ë¶€ ì‹œìŠ¤í…œ)

**íšŒì› ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„ â†’ ê¸°íšìê°€ ë³¼ ìˆ˜ ìˆëŠ” ê·¸ë¦¼**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/e6504ac1-0f7f-4ed5-920b-77067ee766c1/2197d543-6955-42a0-830c-2475f82e6a62.png)

- íšŒì› ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì°¸ì¡°í•œë‹¤.
- íšŒì› ì €ì¥ì†ŒëŠ” â€˜ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œâ€™, â€˜DB íšŒì› ì €ì¥ì†Œâ€™, â€˜ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ íšŒì› ì €ì¥ì†Œâ€™ë¡œ êµ¬í˜„í•˜ê³ , í•„ìš”ì‹œ ì¸í„°í˜ì´ìŠ¤ì— êµ¬í˜„ì²´ë§Œ ê°ˆì•„ë¼ìš°ëŠ” í˜•íƒœë¡œ êµ¬í˜„í•œë‹¤.

**íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ â†’ ê°œë°œìê°€ êµ¬ì²´í™”í•œ ê·¸ë¦¼(ì •ì ì¸ ë‹¤ì´ì–´ê·¸ë¨)**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/c1e574e0-7ee6-4069-8c69-9241d3e33836/d65775a3-9692-441b-ba53-b17d866ef80d.png)

- `MemberService` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ `MemberServiceImpl` ì€ `MemberRepository` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì°¸ì¡°í•œë‹¤.
- `MemebrRepository` ì¸í„°í˜ì´ìŠ¤ì—ëŠ” `MemoryMemberRepository` , `DbMemberRepository` ì™€ ê°™ì€ êµ¬í˜„ì²´ê°€ ì¡´ì¬í•œë‹¤.

**íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ â†’ ì‹¤ì œ newë¡œ ì°¸ì¡°í•œ ì¸ìŠ¤í„´ìŠ¤ë¼ë¦¬ ê·¸ë¦¼(ë™ì ì¸ ë‹¤ì´ì–´ê·¸ë¨)**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/2ba0633a-d7eb-49a7-a03f-eb75d7826882/c5903f67-3f49-4e57-85a6-3126573208f3.png)

íšŒì›ì„œë¹„ìŠ¤: `MemebrServiceImpl`

## íšŒì› ë„ë©”ì¸ ê°œë°œ

ê°œë°œ ìˆœì„œ: ì—”í‹°í‹°(Grade, Member) â†’ íšŒì› ì €ì¥ì†Œ (íšŒì› ì €ì¥ì†Œ(ì¸í„°í˜ì´ìŠ¤) â†’ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ(êµ¬í˜„ì²´)) â†’ ì„œë¹„ìŠ¤(íšŒì› ì„œë¹„ìŠ¤(ì¸í„°í˜ì´ìŠ¤)â†’ íšŒì› ì„œë¹„ìŠ¤`Impl`(êµ¬í˜„ì²´))

### íšŒì› ì—”í‹°í‹°

**Grade**

```java
package hello.core.member;

public enum Grade {
    BASIC,
    VIP
}
```

**Member**

```java
package hello.core.member;

public class Member {
    private Long id;
    private String name;
    private Grade grade;

    public Member1(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Grade getGrade() {
        return grade;
    }

    public void setGrade(Grade grade) {
        this.grade = grade;
    }
}
```

### íšŒì› ë¦¬í¬ì§€í† ë¦¬

**MemebrRepository(Interface)**

```java
package hello.core.member;

public interface MemberRepository {
    //member ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰(returnê°’ ì—†ìœ¼ë¯€ë¡œ void ì‚¬ìš©)
    void save(Member member);
    
    //memberIdë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ Idë¥¼ ë°˜í™˜.
    Member findById(Long MemberId);
}
```

**MemoryMemberRepository(Implementation)**

```java
package hello.core.member;

import java.util.HashMap;
import java.util.Map;

public class MemoryMemberRepository implements MemberRepository {

    Map<Long, Member> store = new HashMap<>();
    
    @Override
    //ë©¤ë²„ ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìœ¼ë©´, ë§´ë²„ ê°ì²´ì˜ ì•„ì´ë””(key)ì™€ ê°ì²´(value)ë¥¼ ìŒìœ¼ë¡œ ì €ì¥
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    //Long íƒ€ì…ì˜ ìˆ«ìë¥¼ ìˆ«ìë¥¼ ë°›ìœ¼ë©´ storeì—ì„œ í•´ë‹¹ keyê°’ì— ëŒ€ì‘í•˜ëŠ” ê°ì²´ ê°€ì ¸ì˜´
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```

### íšŒì› ì„œë¹„ìŠ¤

**MemberService(Interface)**

```java
package hello.core.member;

public interface MemberService {
    //ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´ ì‚¬ìš©: join
    void join(Member member);
    
    //ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´ ì‚¬ìš©: findMember
	    Member findMember(Long memberId);
}
```

**MemberService(Implementation)**

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {

    //MemberRepository Interface ì°¸ì¡° -> implementation = MemoryMemberRepository
    MemberRepository memberRepository = new MemoryMemberRepository();

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

## íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

- **ìë°”ì—ì„œ í…ŒìŠ¤íŠ¸ í•˜ê¸°**

`core/src/main/java/hello/core/member`

**MemberApp**

```java
package hello.core.member;

public class MemberApp {
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member newMember = new Member(1L, "evan", Grade.VIP);
        memberService.join(newMember);

        Member findMember = memberService.findMember(1L);
        System.out.println("newMember = " + newMember.getName());
        System.out.println("findMember = " + findMember.getName());
    }
}
```

**ì‹¤í–‰ê²°ê³¼**

```java
newMember = evan
findMember = evan
```

- **Junitìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í•˜ê¸°**

`core/src/test/java/hello/core/member`

**MemberServiceTest**

```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        //given -> ë©”ì†Œë“œ ì‹¤í–‰ì„ ìœ„í•´ ì£¼ì–´ì§€ëŠ” ê°’
        Member newMember = new Member(1L, "evan", Grade.VIP);

        //when -> ì‹¤ì œ ë©”ì†Œë“œ ì‹¤í–‰
        memberService.join(newMember);
        Member findMember = memberService.findMember(1L);

        //then -> ë©”ì†Œë“œê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ” ì§€ í™•ì¸
        Assertions.assertThat(newMember).isEqualTo(findMember);
    }
}
```

**ì‹¤í–‰ê²°ê³¼**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/9d412a00-1ea9-49f6-995d-244265b91be8/image.png)

ë§Œì¼ whenì„ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•œë‹¤ë©´?

```java
//when
Member findMember = memberService.findMember(2L);
```

**ì‹¤í–‰ê²°ê³¼**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/2d97e757-971e-44f5-9902-ecb5be2136fc/image.png)

- ìœ„ì²˜ëŸ¼ ì˜¤ë¥˜ê°€ ë°œìƒí•¨. ì¼ì¼íˆ ëˆˆìœ¼ë¡œ ê°’ì„ í™•ì¸í•´ê°€ë©°, ëŒ€ì¡°í•´ë³´ì§€ ì•Šì•„ë„ í…ŒìŠ¤íŠ¸ë¥¼ í¸ë¦¬í•˜ê²Œ ì§„í–‰ê°€ëŠ¥

### íšŒì› ë„ë©”ì¸ ì„¤ê³„ì˜ ë¬¸ì œì 

- ì´ ì½”ë“œì˜ ì„¤ê³„ìƒ ë¬¸ì œì ì€ ì•„ë˜ ë‘ê°€ì§€ë¥¼ ì¶©ì¡±í•˜ì§€ ëª»í•¨
    - **OCP ì›ì¹™ ìœ„ë°˜**
        - í™•ì¥ì— ì—´ë ¤ìˆê³  **ë³€ê²½ì— ë‹«í˜€ìˆì–´ì•¼í•œë‹¤.**
        - ê·¸ëŸ¬ë‚˜ `MemberServiceImpl`**ì˜ ê²½ìš°,**
            
            `MemberRepository`ì˜ êµ¬í˜„ì²´ ë³€ê²½ ì‹œ, `new MemoryMemebrRepository`ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” ëª¨ë“  ê°ì²´ì˜ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼í•¨.
            
            ```java
            package hello.core.member;
            
            public class MemberServiceImpl implements MemberService {
            
                //MemberRepository Interface ì°¸ì¡° -> implementation = MemoryMemberRepository
                MemberRepository memberRepository = new MemoryMemberRepository();
            ```
            
    - **DIP ì›ì¹™ ìœ„ë°˜**
        - **ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì— ì˜ì¡´**í•´ì•¼í•œë‹¤.
        ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•´ì•¼ì§€ êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.
        - ê·¸ëŸ¬ë‚˜ `MemberServiceImpl`**ì˜ ê²½ìš°,**
            
            `MemberRepository(interface)`ì™€ `MemoryMemeberRepository(implementation)` ëª¨ë‘ ì˜ì¡´í•˜ê³  ìˆìŒ.
            
            ```java
            package hello.core.member;
            
            public class MemberServiceImpl implements MemberService {
            
                //MemberRepository Interface ì°¸ì¡° -> implementation = MemoryMemberRepository
                MemberRepository memberRepository = new MemoryMemberRepository();
            ```
            
        - ì˜ì¡´ê´€ê³„ê°€ ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„ê¹Œì§€ ëª¨ë‘ ì˜ì¡´í•˜ëŠ” ë¬¸ì œê°€ ìˆìŒ.
    
    **â†’ ì£¼ë¬¸ê¹Œì§€ ë§Œë“¤ê³ ë‚˜ì„œ ë¬¸ì œì ê³¼ í•´ê²°ë°©ì•ˆ ì„¤ëª…**
    

## ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„

- ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
    - íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
    - íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
    - í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì› í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼.(ë‚˜ì¤‘ì— ë³€ê²½ ê°€ëŠ¥)
    - í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³ ìˆë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.(ë¯¸í™•ì •)

**ì£¼ë¬¸ ë„ë©”ì¸ í˜‘ë ¥, ì—­í• , ì±…ì„**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/1c2fd19f-7eae-4af3-92e7-a1b7c3f301bf/ec9cf562-fe86-4b42-8087-25dc10c53a24.png)

1. **ì£¼ë¬¸ ìƒì„±**: í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­
2. **íšŒì› ì¡°íšŒ**: í• ì¸ì„ ìœ„í•´ì„œëŠ” íšŒì› ë“±ê¸‰ í•„ìš”. ê·¸ë˜ì„œ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì› ì¡°íšŒ
3. **í• ì¸ ì ìš©**: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„.
4. **ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜**: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë°˜í™˜

> ì°¸ê³ : ì‹¤ì œë¡œëŠ” ì£¼ë¬¸ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ë‚˜, ì˜ˆì œê°€ ë„ˆë¬´ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆì–´ì„œ ìƒëµ, ë‹¨ìˆœ ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜
> 

**ì£¼ë¬¸ ë„ë©”ì¸ ì „ì²´**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/6b3ac91f-90b5-451b-bb03-9b73d4d5b1b9/05aa6e2d-b86f-4786-8b97-9baa3ab563e8.png)

**ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬**í•´ì„œ ììœ ë¡­ê²Œ êµ¬í˜„ ê°ì²´ë¥¼ ì¡°ë¦½í•  ìˆ˜ ìˆê²Œ ì„¤ê³„.
ë•ë¶„ì— íšŒì› ì €ì¥ì†ŒëŠ” ë¬¼ë¡ , í• ì¸ ì •ì±…ë„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

(íšŒì› ì €ì¥ì†Œ ì—­í•  interface ì•„ë˜, ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ implementation, DB íšŒì› ì €ì¥ì†Œ implementation)

(í• ì¸ ì •ì±… ì—­í•  interface ì•„ë˜, ì •ì•¡ í• ì¸ ì •ì±… implementation, ì •ë¥  í• ì¸ ì •ì±… implementation)

ë”°ë¼ì„œ, ê¸°íšìì˜ ë‹ˆì¦ˆì— ë§ì¶”ì„œ ë°”ê¿” ë¼ìš°ê¸°ë§Œ í•˜ë©´ ë˜ê²Œë” ì„¤ê³„í•¨.

â†’ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°!!!!

**ì£¼ë¬¸ ë„ë©”ì¸ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/84819c87-9601-4cd1-9bd1-1bc7b9b6a955/2708114b-5e76-44d5-8249-f1a8b466f281.png)

- `OrderService(interface)` ì•„ë˜ `OrderServiceImpl(implementation)`
- `OrderServiceImpl` ì€ `MemberRepository(interface)`, `DiscountPolicy(interface)` ì°¸ì¡°
    - interface `MemberRepository`
        - implementation 
        `MemoryMemberRepository`
        `DbMemberRepository implementation`
    - interface `DiscountPolicy`
        - implementation
        `FixDiscountPolicy`
            
            `RateDiscountPolicy`
            

**ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨1**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/f9681745-6601-48ef-bce1-ea75a611944a/dee28f2e-8d58-4a11-8934-3c9ed31ff7c2.png)

íšŒì›ì„ ë©”ëª¨ë¦¬ì—ì„œ ì¡°íšŒ, ì •ì•¡ í• ì¸ ì •ì±…(ê³ ì • ê¸ˆì•¡)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥.

**ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨2**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/6b8d40ba-5287-42be-84df-56b1c96a2c05/25ef053a-1dda-4588-b1eb-ec665808ea04/0d0214f1-b276-41fb-b4bb-970dcff23553.png)

íšŒì›ì„ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ì‹¤ì œ DBì—ì„œ ì¡°íšŒí•˜ê³ , ì •ë¥  í• ì¸ ì •ì±…(ì£¼ë¬¸ ê¸ˆì•¡ì— ë”°ë¼ % í• ì¸)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

**í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**

> ì¦‰, ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ê°€ ì°¸ì¡°í•˜ëŠ” `interface`ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë‚˜ ì½”ë“œë¥¼ ë°”ê¿€ í•„ìš”ì—†ì´ ë‹¨ìˆœíˆ ê° `interface`ë“¤ì˜ êµ¬í˜„ì²´ë§Œ ê°ˆì•„ë¼ìš°ë©´ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ê°€ ë™ì‘í•˜ê³  í´ë¼ì´ì–¸íŠ¸ëŠ” í•´ë‹¹ ê²°ê³¼ë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆìŒ.
> 

## ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ

**Order**

```java
package hello.core.order;

public class Order {
    private Long MemberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    public Order(Long memberId, String itemName, int itemPrice, int discountPrice) {
        MemberId = memberId;
        this.itemName = itemName;
        this.itemPrice = itemPrice;
        this.discountPrice = discountPrice;
    }

    public int calculatePrice() {
        return itemPrice - discountPrice;
    }

    public Long getMemberId() {
        return MemberId;
    }

    public void setMemberId(Long memberId) {
        MemberId = memberId;
    }

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    public int getItemPrice() {
        return itemPrice;
    }

    public void setItemPrice(int itemPrice) {
        this.itemPrice = itemPrice;
    }

    public int getDiscountPrice() {
        return discountPrice;
    }

    public void setDiscountPrice(int discountPrice) {
        this.discountPrice = discountPrice;
    }

    @Override
    public String toString() {
        return "Order{" +
                "MemberId=" + MemberId +
                ", itemName='" + itemName + '\'' +
                ", itemPrice=" + itemPrice +
                ", discountPrice=" + discountPrice +
                '}';
    }
}
```

**OrderService**

```java
package hello.core.order;

public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);
}
```

**OrderServiceImpl**

```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository;
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy;

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

`core/src/main/java/hello/core/OrderApp.java`

**OrderApp**

```java
package hello.core;

import hello.core.member.*;
import hello.core.order.Order;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class OrderApp {
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        OrderService orderService = new OrderServiceImpl();

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);

        System.out.println("order = " + order);
        System.out.println("order.calculatePrice = " + order.calculatePrice());
    }
}
```

`core/src/test/java/hello/core/order/OrderServiceTest.java`

**OrderServiceTest**

```java
package hello.core.order;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class OrderServiceTest {
    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder() {
        //given
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);

        //when
        memberService.join(member);
        Order order = orderService.createOrder(memberId, "itemA", 10000);

        //then
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

**DiscountPolicy**

```java
package hello.core.discount;

import hello.core.member.Member;

public interface DiscountPolicy {
    /**
     * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
     */
    int discount(Member member, int price);
}
```

**FixedDiscountPolicy**

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class FIxDiscountPolicy implements DiscountPolicy {

    private int DiscountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return DiscountFixAmount;
        } else {
            return 0;
        }
    }
}
```